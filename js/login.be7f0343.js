import{j as e,v as a,w as s,x as r,E as t}from"./element-plus.b776ebdf.js";import{I as o,a0 as l,e as d,c as m,a as i,X as p,Q as n,o as u,u as c,a9 as f,b9 as j,b8 as g,V as v}from"./@vue.40d2997d.js";import{u as _,e as b,L as h}from"../assets/index.89622720.js";import{u as w}from"./vue-router.3da43013.js";import{S as y,T as I}from"./@element-plus.47203029.js";import{_ as S}from"./vue-schart.68d133e9.js";import"./lodash-es.94e8499d.js";import"./@vueuse.78e2c1a2.js";import"./@ctrl.9375a141.js";import"./dayjs.02fe0923.js";import"./axios.1eef0c89.js";import"./async-validator.73a10b83.js";import"./memoize-one.c87f6fc8.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.e2b4fa49.js";import"./@floating-ui.6065d27f.js";import"./pinia.32000647.js";import"./vue-demi.6c8f9b0a.js";import"./schart.js.4adc78a3.js";const V=e=>(j("data-v-863db763"),e=e(),g(),e),N={class:"login-wrap"},k={class:"ms-login"},x=V((()=>i("div",{class:"ms-title"},"培养方案系统",-1))),L={class:"login-btn"},T=v("登录"),q=V((()=>i("p",{class:"login-tips"},"Tips : 用户名和密码随便填。",-1))),z=S(o({__name:"login",setup(o){const j=w(),g=l({userName:"admin",password:"admin"}),v={userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},S=_(),V=d(),z=e=>{e&&e.validate((e=>{e&&h(g).then((e=>{if(200!=e.data.code||"登陆成功！"!==e.data.message)return t.error("登陆失败"),!1;{const s=e.data.data.data;t.success("登陆成功！"),localStorage.setItem("ms_userId",s.userId),localStorage.setItem("access_token",e.data.data.access_token),localStorage.setItem("ms_username",s.userName);const r=S.defaultList[(a=s.major,"超级管理员"==a?"admin":"系分院负责人"==a?"departmentBranchHead":"专业负责人"==a?"disciplineLeader":"")];S.handleSet(r),localStorage.setItem("ms_keys",JSON.stringify(r)),j.push("/")}var a}))}))};return b().clearTags(),(t,o)=>{const l=e,d=a,j=s,_=r;return u(),m("div",N,[i("div",k,[x,p(_,{model:g,rules:v,ref_key:"login",ref:V,"label-width":"0px",class:"ms-content"},{default:n((()=>[p(j,{prop:"username"},{default:n((()=>[p(d,{modelValue:g.userName,"onUpdate:modelValue":o[0]||(o[0]=e=>g.userName=e),placeholder:"username"},{prepend:n((()=>[p(l,{icon:c(y)},null,8,["icon"])])),_:1},8,["modelValue"])])),_:1}),p(j,{prop:"password"},{default:n((()=>[p(d,{type:"password",placeholder:"password",modelValue:g.password,"onUpdate:modelValue":o[1]||(o[1]=e=>g.password=e),onKeyup:o[2]||(o[2]=f((e=>z(V.value)),["enter"]))},{prepend:n((()=>[p(l,{icon:c(I)},null,8,["icon"])])),_:1},8,["modelValue"])])),_:1}),i("div",L,[p(l,{type:"warning",onClick:o[3]||(o[3]=e=>z(V.value))},{default:n((()=>[T])),_:1})]),q])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-863db763"]]);export{z as default};
